<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Reporte MHP100</title>

<style>
  :root{
    --blue:#1e3a8a;
    --blue2:#2563eb;
    --black:#000;
    --gray:#e5e5e5;
    --gray2:#cfcfcf;
    --yellow:#ffe36a;
    --orange:#f4a338;
    --red:#ef4444;
    --green:#22c55e;
  }

  body{
    margin:0;
    background:#f7f7f7;
    font-family: Arial, sans-serif;
  }

  .report{
    width: 100%;
    max-width: 900px;
    margin: 0 auto;
    background:#fff;
    padding:16px;
  }

  .page{
    position:relative;
    width: 100%;
    min-height: 1090px;
    padding: 18px 22px;
    box-sizing:border-box;
    background:#fff;
  }

  .p1-header{
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    gap:10px;
  }

  .logos{
    display:flex;
    align-items:center;
    gap:8px;
  }

  .logos img{
    height:42px;
    object-fit:contain;
  }

  .curve-wrap{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap:10px;
  }

  .curve-card{
    border:1px solid #000;
    padding:8px;
  }

  .b-red{background:var(--red)}
  .b-orange{background:var(--orange)}
  .b-green{background:var(--green)}
  .badge{
    color:#000;
    font-weight:800;
    border:1px solid #000;
    padding:1px 6px;
    font-size:11px;
    display:inline-block;
  }

  .page-break{height:0;margin:0;border:0}
  @media print{
    body{background:#fff;}
    .report{padding:0;max-width:none;}
    .page{page-break-after:always;}
  }

/* ====== PDF PAGE 1 LOOK ====== */
.page-1{
  font-family: Arial, sans-serif;
  color:#000;
}
.p1-title-pdf{
  font-weight:800;
  font-size:20px;
  line-height:1.05;
}
.p1-title-pdf .line2{
  font-size:14px;
  margin-top:2px;
  font-weight:800;
}
.header-grid{
  margin-top:6px;
  border:1px solid #000;
  padding:6px 8px;
  font-size:12.5px;
  display:grid;
  grid-template-columns: 1.4fr .6fr .9fr 1fr;
  gap:4px 10px;
}
.header-grid .cell b{font-weight:800;}
.header-grid .cell span{font-weight:700;}

.curve-pdf{
  border:0;
  padding:0;
}
.curve-svg-wrap{
  position:relative;
  border:1px solid #000;
  height:78px;
  padding:4px 6px 0 6px;
}
.curve-marker-pdf{
  position:absolute;
  bottom:10px;
  width:0;height:0;
  border-left:6px solid transparent;
  border-right:6px solid transparent;
  border-top:10px solid #000;
  transform:translateX(-50%);
}
.curve-scale-pdf{
  font-size:11px;
  display:flex;
  justify-content:space-between;
  margin-top:2px;
  padding:0 2px;
}

.iv-table{
  font-size:12px;
}
.iv-table td,.iv-table th{
  border:1px solid #000;
  padding:4px 6px;
}
.iv-table th{
  background:#fff;
  font-weight:800;
  font-size:11.5px;
}
.iv-table .hl{ background:#ffe36a; } /* mismo amarillo PDF */

.block-title{
  margin-top:8px;
  font-weight:800;
  font-size:12.5px;
  display:flex;
  align-items:center;
  gap:6px;
}
.block-dot{
  width:7px;height:7px;border-radius:50%;
  background:#f4a338;display:inline-block;
}
.block-head-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:2px;
  margin-bottom:2px;
  font-size:12px;
  font-weight:800;
}
.ih-box{
  background:#ffe36a;
  padding:1px 6px;
  border:1px solid #000;
  font-weight:800;
  min-width:62px;
  text-align:right;
}

.skill-rows{
  width:100%;
  border-top:1px solid #000;
  border-left:1px solid #000;
  border-right:1px solid #000;
}
.skill-row{
  display:grid;
  grid-template-columns: 180px 1fr;
  border-bottom:1px solid #000;
  font-size:11.5px;
  align-items:center;
}
.skill-name{
  padding:2px 6px;
  text-transform:uppercase;
}
.bar100{
  position:relative;
  height:14px;
  background:#fff;
  border-left:1px solid #000;
}
.bar100::before{
  content:"";
  position:absolute;top:0;bottom:0;left:40%;
  width:0;border-left:1px solid #000;
}
.bar100::after{
  content:"";
  position:absolute;top:0;bottom:0;left:70%;
  width:0;border-left:1px solid #000;
}
.barfill{
  position:absolute;top:0;left:0;bottom:0;
  background:#cfcfcf;
}

.range-head{
  display:grid;
  grid-template-columns:180px 1fr 1fr 1fr;
  font-size:11px;font-weight:800;
  margin-top:2px;
}
.range-head div{ text-align:center; }

.iie-row{
  margin-top:8px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-size:12px;font-weight:800;
}
.iie-bar{
  position:relative;
  height:18px;
  border:1px solid #000;
  background:#fff;
  width:110px;
}
.iie-fill{
  position:absolute;top:0;bottom:0;right:0;
  background:#2563eb;
  width:100%;
}
.iie-val{
  position:absolute;inset:0;
  display:flex;align-items:center;justify-content:center;
  color:#fff;font-weight:800;
}

.comm-block{
  margin-top:8px;
  border-top:1px solid #000;
  padding-top:4px;
}
.comm-head{
  display:flex;justify-content:space-between;align-items:center;
  font-size:12px;font-weight:800;margin-bottom:2px;
}
.comm-scale{
  font-size:11px;font-weight:800;
  display:flex;justify-content:space-between;
  padding:0 4px;margin-bottom:2px;
}
.comm-bar{
  position:relative;height:12px;border:1px solid #000;background:#fff;
}
.comm-fill{position:absolute;left:0;top:0;bottom:0;background:#cfcfcf;}
.comm-marker{
  position:absolute;top:-5px;width:0;height:0;
  border-left:5px solid transparent;border-right:5px solid transparent;
  border-top:8px solid #000;transform:translateX(-50%);
}
.comm-ticks{
  font-size:10.5px;display:flex;justify-content:space-between;padding:0 2px;margin-top:1px;
}

.comfort-block{
  margin-top:6px;
  font-size:12px;font-weight:800;
}
.comfort-box{
  margin-top:2px;border:1px solid #000;height:14px;background:#fff;position:relative;
}
.comfort-fill{
  position:absolute;left:0;top:0;bottom:0;background:#cfcfcf;width:0%;
}
.comfort-label{
  margin-top:1px;font-size:10.5px;font-weight:700;display:flex;justify-content:space-between;
}

</style>
</head>
<body>
<div class="report">

<section class="page page-1" id="page1">

  <div class="p1-header">
    <div>
      <div class="p1-title-pdf">SKILL MAP</div>
      <div class="p1-title-pdf line2">INTELIGENCIA EMOCIONAL</div>
    </div>

    <div class="logos">
      <img src="/assets/mhp100.jpg" alt="MHP100"/>
      <img src="/assets/sellolexium.png" alt="Lexium"/>
    </div>
  </div>

  <!-- Datos cabecera estilo PDF -->
  <div class="header-grid">
    <div class="cell" style="grid-column:1 / span 2">
      <b>Nombre:</b> <span id="pNombre">—</span>
    </div>
    <div class="cell"><b>Edad:</b> <span id="pEdad">—</span></div>
    <div class="cell"><b>Grado:</b> <span id="pCurso">—</span></div>

    <div class="cell" style="grid-column:1 / span 2">
      <b>Institución:</b> <span id="pInst">—</span>
    </div>
    <div class="cell"><b>Grupo:</b> <span id="pGrupo">—</span></div>
    <div class="cell"><b>Fecha:</b> <span id="fechaLine">—</span></div>
  </div>

  <div class="curve-wrap" style="grid-template-columns:1.05fr .95fr;margin-top:6px">

    <!-- Curva distribución (campana) -->
    <div class="curve-card curve-pdf">
      <div style="font-weight:800;font-size:12px;margin:0 0 2px 0;text-transform:uppercase;">
        Distribución General de la Habilidad Personal
      </div>

      <div class="curve-svg-wrap">
        <!-- usa tu SVG actual e IDs -->
        <svg id="curveSvg" width="100%" height="68" viewBox="0 0 360 68" preserveAspectRatio="none">
          <path id="curvePath" d="" fill="none" stroke="#000" stroke-width="2"></path>
          <path id="curveFill" d="" fill="#e5e5e5" stroke="none"></path>
        </svg>
        <div id="curveMarker" class="curve-marker-pdf" style="left:50%"></div>
      </div>

      <div class="curve-scale-pdf">
        <div>0</div><div>30</div><div>50</div><div>70</div><div>100</div>
      </div>
    </div>

    <!-- Tabla IV -->
    <div>
      <table class="iv-table" style="width:100%;border-collapse:collapse;margin-top:18px">
        <thead>
          <tr>
            <th style="width:45%">Indicador</th>
            <th style="width:15%">Esc.</th>
            <th style="width:20%">Rango</th>
            <th style="width:20%">Interpretación</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td id="iv1Label">IV1</td>
            <td class="hl" id="iv1Esc">—</td>
            <td id="iv1Rango">—</td>
            <td id="iv1Interp">—</td>
          </tr>
          <tr>
            <td id="iv2Label">IV2</td>
            <td class="hl" id="iv2Esc">—</td>
            <td id="iv2Rango">—</td>
            <td id="iv2Interp">—</td>
          </tr>
          <tr>
            <td id="iv3Label">IV3</td>
            <td class="hl" id="iv3Esc">—</td>
            <td id="iv3Rango">—</td>
            <td id="iv3Interp">—</td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>

  <!-- Bloques de habilidades -->
  <div style="margin-top:6px">

    <!-- Autoconocimiento -->
    <div class="block-title"><span class="block-dot"></span>AUTOCONOCIMIENTO EMOCIONAL</div>
    <div class="block-head-row">
      <div>Sub Habilidades Específicas</div>
      <div class="ih-box">IH&nbsp;<span id="ihAuto">—</span></div>
    </div>

    <div class="range-head">
      <div></div>
      <div>Bajo</div><div>Medio</div><div>Alto</div>
    </div>

    <div class="skill-rows" id="autoRows">
      <!-- filas las crea tu JS -->
    </div>

    <!-- Autocontrol -->
    <div class="block-title"><span class="block-dot"></span>AUTOCONTROL EMOCIONAL</div>
    <div class="block-head-row">
      <div>Sub Habilidades Específicas</div>
      <div class="ih-box">IH&nbsp;<span id="ihControl">—</span></div>
    </div>

    <div class="range-head">
      <div></div>
      <div>Bajo</div><div>Medio</div><div>Alto</div>
    </div>

    <div class="skill-rows" id="controlRows"></div>

    <!-- Empatía -->
    <div class="block-title"><span class="block-dot"></span>EMPATÍA</div>
    <div class="block-head-row">
      <div>Sub Habilidades Específicas</div>
      <div class="ih-box">IH&nbsp;<span id="ihEmpatia">—</span></div>
    </div>

    <div class="range-head">
      <div></div>
      <div>Bajo</div><div>Medio</div><div>Alto</div>
    </div>

    <div class="skill-rows" id="empatiaRows"></div>
  </div>

  <!-- IIE -->
  <div class="iie-row">
    <div>IIE: Indicador de Inteligencia Emocional</div>
    <div class="iie-bar">
      <div class="iie-fill"></div>
      <div class="iie-val"><span id="iieVal">—</span></div>
    </div>
  </div>

  <!-- Comunicación / Propensión -->
  <div class="comm-block">
    <div class="comm-head">
      <div>Comunicación asertiva</div>
      <div>Propensión Social</div>
    </div>

    <div class="comm-scale">
      <div>0</div><div>30</div><div>50</div><div>70</div><div>100</div>
    </div>

    <div class="comm-bar">
      <div class="comm-fill" id="commFill" style="width:0%"></div>
      <div class="comm-marker" id="commMarker" style="left:50%"></div>
    </div>
    <div class="comm-ticks">
      <div>Bajo</div><div>Medio</div><div>Alto</div>
    </div>

    <div class="comfort-block">
      Grado de confort
      <div class="comfort-box">
        <div class="comfort-fill" id="comfortFill"></div>
      </div>
      <div class="comfort-label">
        <div>Bajo</div><div>Medio</div><div>Alto</div>
      </div>
    </div>
  </div>

</section>

<hr class="page-break"/>

<!-- ====== PAGE 2 (tu versión previa) ====== -->
<section class="page page-2" id="page2">
  <div class="p2-header">
    <div style="font-weight:800;font-size:18px">SKILL MAP</div>
    <div style="font-weight:800;font-size:12px;margin-top:-2px">INTELIGENCIA EMOCIONAL</div>
  </div>

  <div id="p2Content">
    <!-- aquí va tu estructura preexistente -->
  </div>
</section>
</div>

<script>
/* ========= Helpers ========= */
const $ = sel => document.querySelector(sel);

function rangoBadge(p){
  if (p<=40) return {txt:"1–40 Por desarrollar", cls:"b-red"};
  if (p<=70) return {txt:"41–70 En desarrollo", cls:"b-orange"};
  return {txt:"71–100 Desarrollada", cls:"b-green"};
}

function interp(p){
  if (p<=40) return "Baja";
  if (p<=70) return "Media";
  return "Alta";
}

/* ========= Render de filas PDF ========= */
function renderSkillRows(containerId, items){
  const cont = $("#"+containerId);
  cont.innerHTML = "";
  items.forEach(it=>{
    const row = document.createElement("div");
    row.className = "skill-row";
    row.innerHTML = `
      <div class="skill-name">${it.nombre}</div>
      <div class="bar100">
        <div class="barfill" style="width:${it.porc}%"></div>
      </div>
    `;
    cont.appendChild(row);
  });
}

/* ========= Curva campana ========= */
function dibujarCurva(valor){
  const svg = $("#curveSvg");
  const path = $("#curvePath");
  const fill = $("#curveFill");
  if (!svg || !path || !fill) return;

  const W=360, H=68;
  const points=[];
  for(let x=0;x<=W;x+=6){
    const t = (x/W)*6 - 3;
    const y = Math.exp(-0.5*t*t);
    points.push([x, H - (y*55 + 4)]);
  }
  let d = `M ${points[0][0]} ${points[0][1]}`;
  for(let i=1;i<points.length;i++){
    d += ` L ${points[i][0]} ${points[i][1]}`;
  }
  path.setAttribute("d", d);

  let df = d + ` L ${W} ${H} L 0 ${H} Z`;
  fill.setAttribute("d", df);

  const marker = $("#curveMarker");
  if(marker){
    marker.style.left = `${valor}%`;
  }
}

/* ========= Carga principal ========= */
function cargarReporte(data){
  // cabecera
  $("#pNombre").textContent = data.nombre || "—";
  $("#pEdad").textContent   = data.edad || "—";
  $("#pCurso").textContent  = data.grado || "—";
  $("#pInst").textContent   = data.institucion || "—";
  $("#pGrupo").textContent  = data.grupo || "—";
  $("#fechaLine").textContent = data.fecha || "—";

  // IVs
  $("#iv1Esc").textContent = data.iv1?.esc ?? "—";
  $("#iv1Rango").textContent = data.iv1?.rango ?? "—";
  $("#iv1Interp").textContent= data.iv1?.interp ?? "—";

  $("#iv2Esc").textContent = data.iv2?.esc ?? "—";
  $("#iv2Rango").textContent = data.iv2?.rango ?? "—";
  $("#iv2Interp").textContent= data.iv2?.interp ?? "—";

  $("#iv3Esc").textContent = data.iv3?.esc ?? "—";
  $("#iv3Rango").textContent = data.iv3?.rango ?? "—";
  $("#iv3Interp").textContent= data.iv3?.interp ?? "—";

  // IHs
  $("#ihAuto").textContent     = data.ihAuto ?? "—";
  $("#ihControl").textContent  = data.ihControl ?? "—";
  $("#ihEmpatia").textContent  = data.ihEmpatia ?? "—";

  // filas por bloque
  renderSkillRows("autoRows", data.autoItems||[]);
  renderSkillRows("controlRows", data.controlItems||[]);
  renderSkillRows("empatiaRows", data.empatiaItems||[]);

  // IIE
  $("#iieVal").textContent = data.iie ?? "—";

  // comunicación asertiva / propensión social
  const comm = data.comunicacion ?? 50;
  $("#commFill").style.width = comm + "%";
  $("#commMarker").style.left = comm + "%";

  const confort = data.propension ?? 50;
  $("#comfortFill").style.width = confort + "%";

  // curva
  dibujarCurva(data.ivGlobal ?? 50);
}

/* ========= Datos demo (tu JS real lo reemplaza) ========= */
const demo = {
  nombre:"—",
  edad:"—",
  grado:"—",
  institucion:"—",
  grupo:"—",
  fecha:"—",
  ivGlobal:50,
  iv1:{esc:50,rango:"41–70",interp:"Media"},
  iv2:{esc:50,rango:"41–70",interp:"Media"},
  iv3:{esc:50,rango:"41–70",interp:"Media"},
  ihAuto:50,
  ihControl:50,
  ihEmpatia:50,
  autoItems:[
    {nombre:"Reconocimiento de emociones", porc:50},
    {nombre:"Identificación de emociones", porc:50},
    {nombre:"Autoevaluación", porc:50},
  ],
  controlItems:[
    {nombre:"Manejo de impulsos", porc:50},
    {nombre:"Tolerancia a la frustración", porc:50},
    {nombre:"Adaptación al cambio", porc:50},
    {nombre:"Resistencia al estrés", porc:50},
  ],
  empatiaItems:[
    {nombre:"Reconocimiento social", porc:50},
    {nombre:"Escucha activa", porc:50},
    {nombre:"Comprensión de emociones", porc:50},
  ],
  iie:50,
  comunicacion:50,
  propension:50
};

/* ========= Arranque ========= */
(function init(){
  try{
    if(window.__LEXIUM_DATA__){
      cargarReporte(window.__LEXIUM_DATA__);
    }else{
      cargarReporte(demo);
    }
  }catch(e){
    console.error(e);
    cargarReporte(demo);
  }
})();
</script>
</body>
</html>
